<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NAME CARD LIST</title>
  <!-- <link rel="stylesheet" href="./reset.css"> -->
  <link rel="stylesheet" href="./prehackathon.css.css">
  <!-- <script src="./main.js" defer></script> -->
</head>

<body>

  <div class="wrapper clearfix">
    <h1>NAMECARD</h1>
    <div class="newInfo">
      <h2>NAMECARD EDIT</h2>
      <input type="text" class="newName" placeholder="이름">
      <input type="text" class="newCompany" placeholder="회사">
      <input type="text" class="newDivision" placeholder="부서">
      <input type="text" class="newEmail" placeholder="이메일주소">
      <input type="text" class="newMobile" placeholder="핸드폰번호">
      <button class="submitBtn">등록</button>
    </div>

    <div class="namecardList">
      <h2>NAMECARD LIST</h2>
      <ul class="sortList">
        <li class="sortName">이름순</li>
        <li class="sortCompany">회사순</li>
        <li class="sortRecent">최신등록순</li>
      </ul>

      <ul class="cardList clearfix">
        <!-- <li class="namecard color1">
          <div class="namecardInfo">
            <span class="cardName">홍길동</span>
            <span class="cardMobile">010-1354-4645</span>
            <span class="cardEmail">abd@kakaobank.co.kr</span>
          </div>
          <div class="namecardCompany">
            <span class="cardCompany">카카오뱅크</span>
            <span class="cardDivision">UX디자인팀</span>
          </div>
          <button class="deleteBtn">X</button>
        </li>
        <li class="namecard color2">
          <div class="namecardInfo">
            <span class="cardName">홍길동</span>
            <span class="cardMobile">010-1354-4645</span>
            <span class="cardEmail">abd@kakaobank.co.kr</span>
          </div>
          <div class="namecardCompany">
            <span class="cardCompany">카카오뱅크</span>
            <span class="cardDivision">UX디자인팀</span>
          </div>
          <button class="deleteBtn">X</button>
        </li> -->
      </ul>
    </div>
  </div>

  <script>
    let cardList = [{
      id: 1,
      name: '우정',
      mobile: '010395839',
      email: 'dksf',
      company: 'dsf',
      division: 'sdf'
    }];
    const $newInfo = document.querySelector('.newInfo');
    const $cardList = document.querySelector('.sortList');
    const $submitBtn = document.querySelector('.submitBtn');
    const $sortName = document.querySelector('.sortName');
    const $sortCompany = document.querySelector('.sortCompany');
    const $sortRecent = document.querySelector('.sortRecent');

    const render = () => {
      let html = '';

      cardList.forEach(card => {
        html += `<li id="${card.id}" class="namecard color1">
          <div class="namecardInfo">
            <span class="cardName">${card.name}</span>
            <span class="cardMobile">${card.mobile}</span>
            <span class="cardEmail">${card.email}</span>
          </div>
          <div class="namecardCompany">
            <span class="cardCompany">${card.company}</span>
            <span class="cardDivision">${card.division}</span>
          </div>
          <button class="deleteBtn">X</button>
        </li>`;
      });

      $cardList.innerHTML = html;
    };

    const generateId = () => {
      return cardList.length ? Math.max(...cardList.map(card => card.id)) + 1 : 1;
    };

    const sort = (by) => {

};

    window.onload = render;

    $submitBtn.onclick = e => {
      let inputs = [...$newInfo.children].filter(child => child.nodeName === 'INPUT');
      const isBlank = inputs.filter(info => info.value.trim().length === 0) === 0;
      let [name, company, division, email, mobile] = inputs.map(input => input.value);

      if (!isBlank) {
        alert('빈 칸을 채워주세요');
        return;
      };

      cardList = [...cardList, {
        id: generateId(),
        name,
        company,
        division,
        email,
        mobile
      }];

      render();

      inputs.forEach(input => input.value = '');
    };

    $cardList.onclick = e => {
      let id = e.target.parentNode.id;

      if (e.target.matches('.cardList > li > button.deletebtn')) return;

      cardList = cardList.filter(card => card.id !== +id);

      render();
    };



  </script>
</body>

</html>